var chxm1023 = JSON.parse($response.body);
const user = '/user';
const yza = '/visitors';
const yh = '/user_info';

if ($request.url.indexOf(user) != -1){
chxm1023.result.device_id = "78B61F3B-706F-44E8-9E4D-F68BDA1BA896";
chxm1023.result._id = "6358cb93e7a295001482d9aa";
chxm1023.result.svip_given = 365;
chxm1023.result.ranking_above = 91;
chxm1023.result.is_visitor = false;
chxm1023.result.is_phone_verified = true;
chxm1023.result.hasBeenInvited = true;
chxm1023.result.is_xy_vip = true;
chxm1023.result.vip_expired_at = 4092599349;
chxm1023.result.is_vip = true;
chxm1023.result.xy_svip_expire = 4092599349;
chxm1023.result.third_party_ids = [
     "63592fa7e7a295001888256b",
      "639ac02db1839300133031c0"
    ];
chxm1023.result.wt.vip = {
        "is_auto_renewal" : false,
        "enabled" : true,
        "svip_auto_renewal_type" : "",
        "expired_at" : 4092599349,
        "auto_renewal_type" : "",
        "svip_expired_at" : 4092599349
      };
chxm1023.result.wt.svip_given = 365;
chxm1023.result.wt.ranking_above = 91;
chxm1023.result.name = "chxm1023";
chxm1023.result.avatar = "https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLia6zPUuGQKVOJk2gnjpjHxSIuH7XaOJF2gEk9ic35ibib4QzUcbvNu6EpdHDc1Vciat1xg63ibK6EptWw/132";
chxm1023.result.phone_num = "13145200000";
chxm1023.result.vip_take_effect = 1;
chxm1023.result.is_auto_renewal = false;
chxm1023.result.is_primary = true;
chxm1023.result.xy_vip_expire = 0;
chxm1023.result.platform_id = "o3rJ_t00r0mxqS6GCVWMaVtEFLUk";
chxm1023.result.svip_expired_at = 4092599349;
chxm1023.result.svip_take_effect = 1;
chxm1023.result.vip_type = "s";
chxm1023.result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJ1c2VyX2lkIjoiNWY1YmZjNTdkMmM2ODkwMDE0ZTI2YmI4Iiwic3ZpcF9leHBpcmVkX2F0IjoxNzA1MzMxMTY2LjQxNjc3MSwidmlwX2V4cGlyZWRfYXQiOjB9.h_Cem89QarTXxVX9Z_Wt-Mak6ZHAjAJqgv3hEY6wpps";
chxm1023.result.bound_status.qq = {
        "id" : "63592fa7e7a295001888256b",
        "username" : "chxm1023",
        "is_bound" : true
      };
chxm1023.result.bound_status.weixin = {
        "id" : "639ac02db1839300133031c0",
        "username" : "chxm1023",
        "is_bound" : true
      };
chxm1023.result.bound_statuscaiyun = {
        "id" : "6358cb93e7a295001482d9aa",
        "username" : "",
        "is_bound" : true
      };
}

if ($request.url.indexOf(yza) != -1){
chxm1023.result.device_id = "78B61F3B-706F-44E8-9E4D-F68BDA1BA896";
chxm1023.result._id = "6358cb93e7a295001482d9aa";
chxm1023.result.svip_given = 365;
chxm1023.result.ranking_above = 91;
chxm1023.result.is_visitor = false;
chxm1023.result.is_phone_verified = true;
chxm1023.result.hasBeenInvited = true;
chxm1023.result.is_xy_vip = true;
chxm1023.result.vip_expired_at = 4092599349;
chxm1023.result.is_vip = true;
chxm1023.result.xy_svip_expire = 4092599349;
chxm1023.result.third_party_ids = [
     "63592fa7e7a295001888256b",
      "639ac02db1839300133031c0"
    ];
chxm1023.result.wt.vip = {
        "is_auto_renewal" : false,
        "enabled" : true,
        "svip_auto_renewal_type" : "",
        "expired_at" : 4092599349,
        "auto_renewal_type" : "",
        "svip_expired_at" : 4092599349
      };
chxm1023.result.wt.svip_given = 365;
chxm1023.result.wt.ranking_above = 91;
chxm1023.result.name = "chxm1023";
chxm1023.result.avatar = "https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLia6zPUuGQKVOJk2gnjpjHxSIuH7XaOJF2gEk9ic35ibib4QzUcbvNu6EpdHDc1Vciat1xg63ibK6EptWw/132";
chxm1023.result.phone_num = "13145200000";
chxm1023.result.vip_take_effect = 1;
chxm1023.result.is_auto_renewal = false;
chxm1023.result.is_primary = true;
chxm1023.result.xy_vip_expire = 0;
chxm1023.result.platform_id = "o3rJ_t00r0mxqS6GCVWMaVtEFLUk";
chxm1023.result.svip_expired_at = 4092599349;
chxm1023.result.svip_take_effect = 1;
chxm1023.result.vip_type = "s";
chxm1023.result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJ1c2VyX2lkIjoiNWY1YmZjNTdkMmM2ODkwMDE0ZTI2YmI4Iiwic3ZpcF9leHBpcmVkX2F0IjoxNzA1MzMxMTY2LjQxNjc3MSwidmlwX2V4cGlyZWRfYXQiOjB9.h_Cem89QarTXxVX9Z_Wt-Mak6ZHAjAJqgv3hEY6wpps";
chxm1023.result.bound_status.qq = {
        "id" : "63592fa7e7a295001888256b",
        "username" : "chxm1023",
        "is_bound" : true
      };
chxm1023.result.bound_status.weixin = {
        "id" : "639ac02db1839300133031c0",
        "username" : "chxm1023",
        "is_bound" : true
      };
chxm1023.result.bound_statuscaiyun = {
        "id" : "6358cb93e7a295001482d9aa",
        "username" : "",
        "is_bound" : true
      };
}

if ($request.url.indexOf(yh) != -1){
chxm1023.show_completed_award = true,
chxm1023.avatar_status = 1,
chxm1023.industry = "ËÉΩÊ∫ê/Áüø‰∫ß/ÁîµÂäõ/ÁéØÂ¢É",
chxm1023.reg_time = "1599863895",
chxm1023.name_status = 1,
chxm1023.completed_percent = 100,
chxm1023.avatar = "https://tvax4.sinaimg.cn/crop.0.0.512.512.180/5b346ee9ly8h2rbudgjzvj20e80e8wet.jpg?KID=imgbed,tva&Expires=1687458878&ssig=8y8aNZ7Vzz",
chxm1023.reg_days = 1015,
chxm1023.birthday = "1987-07-18",
chxm1023.city = "Ê≥∞Â∑ûÂ∏Ç",
chxm1023.interests = [
    "Á©øË°£ÊåáÂçó",
    "Á©∫Ê∞îË¥®Èáè",
    "ÂæíÊ≠•",
    "Ê∞îË±°ÊôØËßÇ",
    "Ê∞îË±°Áé∞Ë±°"
  ],
chxm1023.name = "xuandrew",
chxm1023.gender = 1
}

$done({body : JSON.stringify(chxm1023)});


/******************
/**********************************************
ËÑöÊú¨ÂäüËÉΩÔºöÂΩ©‰∫ëÂ§©Ê∞î Ëß£ÈîÅ‰ºöÂëò
‰ΩøÁî®Â£∞ÊòéÔºö‚ö†Ô∏è‰ªÖ‰æõÂ≠¶‰π†‰∫§ÊµÅÔºåüà≤Ô∏èÂïÜ‰∏öÁî®ÈÄî


https://biz.cyapi.cn/v2/user?app_name=weather
https://biz.cyapi.cn/v1/visitors
https://biz.cyapi.cn/v3/login_by_code ÁôªÂΩï


[rewrite_local]
^https:\/\/biz\.cyapi\.cn\/v\d\/(user\?app_name=weather|visitors|login_by_code)$ url script-response-body https://raw.githubusercontent.com/jizhi0520/QX/main/caiyun.js
^https:\/\/biz\.cyapi\.cn\/p\/v1\/user_info url script-response-body https://raw.githubusercontent.com/jizhi0520/QX/main/caiyun-user.js


[MITM]
hostname = biz.cyapi.cn
**********************************************/


var url = $request.url;
var obj = JSON.parse($response.body);
let Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJ1c2VyX2lkIjoiNWY1YmZjNTdkMmM2ODkwMDE0ZTI2YmI4Iiwic3ZpcF9leHBpcmVkX2F0IjoxNzA1MzMxMTY2LjQxNjc3MSwidmlwX2V4cGlyZWRfYXQiOjB9.h_Cem89QarTXxVX9Z_Wt-Mak6ZHAjAJqgv3hEY6wpps";

if (url.indexOf('/user') != -1 || url.indexOf('/visitors') != -1) {
		obj.result.token = Token;
	body = JSON.stringify(obj);
}

if (url.indexOf('/login_by_code') != -1) {
	let obj = {
		"status": "ok",
		"result": {
			"is_phone_verified": true,
			"token": Token
		},
		"rc": 0
	}
	body = JSON.stringify(obj);
}
$done({body});